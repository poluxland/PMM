<div class="row">

  <div class="col-sm-6">
    <h4>Camiones diarios:</h4>
<table class="table">
  <thead class="thead-dark">
    <tr>
      <th scope="col">Materia Prima</th>
      <th scope="col">Camiones</th>
      <th scope="col">Tiempo promedio</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th scope="row">Cachinales</th>
      <td><%= Truck.where(created_at: Time.zone.now.beginning_of_day..Time.zone.now.end_of_day).where(mmpp_id: 1).count %></td>
      <td>1</td>

    </tr>
    <tr>
      <th scope="row">Caolin</th>
      <td><%= Truck.where(created_at: Time.zone.now.beginning_of_day..Time.zone.now.end_of_day).where(mmpp_id: 2).count %></td>
      <td>2</td>
    </tr>
     <tr>
      <th scope="row">Conchuela</th>
      <td><%= Truck.where(created_at: Time.zone.now.beginning_of_day..Time.zone.now.end_of_day).where(mmpp_id: 3).count %></td>
      <td>3</td>
    </tr>
     <tr>
      <th scope="row">Ñilhue</th>
      <td><%= Truck.where(created_at: Time.zone.now.beginning_of_day..Time.zone.now.end_of_day).where(mmpp_id: 4).count %></td>
      <td>4</td>
    </tr>
     <tr>
      <th scope="row">Quilimari</th>
      <td><%= Truck.where(created_at: Time.zone.now.beginning_of_day..Time.zone.now.end_of_day).where(mmpp_id: 5).count %></td>
      <td>5</td>
    </tr>


   <tr class="bg-secondary">
      <th scope="row">Total general</th>
      <td><%= Truck.where(created_at: Time.zone.now.beginning_of_day..Time.zone.now.end_of_day).count %></td>
      <td><%= Truck.where(created_at: Time.zone.now.beginning_of_day..Time.zone.now.end_of_day).average(:number) %></td>


    </tr>
  </tbody>
</table>
<td><%= Mmpp.ids %></td>


</table>
  </div>

  <div class="col-sm-6">
    <h4>Porcentaje diario:</h4>

<!--Table-->
<% if @trucks_by_material.nil? || @trucks_by_material.empty? %>
  <p>No truck data available.</p>
<% else %>
  <table class="table">
    <thead class="thead-dark">
      <tr>
        <th scope="col">Material</th>
        <th scope="col">Total Trucks</th>
        <th scope="col">Average Trucks</th>
      </tr>
    </thead>
    <tbody>
      <% @trucks_by_material.each do |truck_data| %>
        <tr>
          <td><%= truck_data.nombre %></td>
          <td><%= truck_data.total_trucks %></td>
          <td><%= truck_data.average_trucks.round(2) %></td>
        </tr>
      <% end %>
    </tbody>
  </table>
<% end %>
<!--Table-->
  </div>
</div>
<br>
<br>



<div class="row">

  <div class="col-sm-6">
    <h4>Camiones diarios:</h4>
    <%= column_chart @trucks_data_day_number, stacked: true %>
  </div>

  <div class="col-sm-6">
    <h4>Porcentaje diario:</h4>

    <%= column_chart @trucks_data_day, stacked: true %>
  </div>
</div>
<br>
<br>


<div class="row">

  <div class="col-sm-4">
    Porcentaje mensual:
    <%= column_chart @trucks_data_month, stacked: true %>
  </div>
  <div class="col-sm-4">
    Unitario mensual:
    <%= column_chart @trucks_data_month_number, stacked: true %>
  </div>
  <div class="col-sm-4">
    Distribución de camiones segun tipo
    <%= pie_chart Truck.group(:tipo).count %>
  </div>

</div>

<br>
<br>

<div class="row">
  <div class="col-sm-4">
    Camiones BRU diarios
    <%= line_chart Bru.group_by_day(:fecha).count %>
  </div>
  <div class="col-sm-4">
    Camiones BRU segun dia
    <%= column_chart Bru.group_by_day_of_week(:created_at, format: "%a").count %>
  </div>
  <div class="col-sm-4">
    Camiones BRU segun MMPP
    <%= pie_chart Bru.group(:mmpp).count %>
  </div>
</div>

<br>


<a class="btn btn-primary" href="#" onclick="window.print();return false;" >Imprimir reporte</a>
